{#
    portal/login.m.html
    ~~~~~~~~~~~~~~~~~

    This page displays a formular where the user can log in.

    :copyright: (c) 2007-2012 by the Inyoka Team, see AUTHORS for more details.
    :license: GNU GPL, see LICENSE for more details.
#}

{%- extends 'portal/overall.m.html' %}
{% from 'macros.html' import render_form %}
{% do BREADCRUMB.append('Login', href('portal', 'login'), True) %}
{% block content %}
  <h3>Login</h3>
  <p>
    {%- trans register=href('portal', 'register'), lost_password=href('portal', 'lost_password') -%}
      You can login here if you are already <a href="{{ register }}">registered</a>. If you lost your password, you can <a href="{{ lost_password }}">request a new one</a>.
    {%- endtrans -%}
  </p>
  {% include 'portal/login_text.m.html' with context %}
  <form action="" method="post" class="loginform">
		{{ csrf_token() }}
    <dl>
      {{ render_form(form, ['username', 'password'], inline=true) }}
      <dd>
        {{ form.permanent }} <label for="id_permanent">{{ form.permanent.label }}</label>
      </dd>
    </dl>
    <div class="actions">
      <input type="hidden" name="redirect" value="" />
      <input type="submit" id="login" value="{% trans %}Login{% endtrans %}" tabindex="1" />
    </div>

  </form>
{% endblock %}

{% block additional_scripts %}
  {{ super() }}
  <script type="text/javascript">
    var input = OpenIDHelper($('input[name="username"]'), {{ OPENID_PROVIDERS|jsonencode }});
  </script>
{% endblock %}
