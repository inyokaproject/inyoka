{#
    templates.admin.configuration
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    On this page the administrator can set general configuration values.

    :copyright: (c) 2007-2011 by the Inyoka Team, see AUTHORS for more details.
    :license: GNU GPL, see LICENSE for more details.
#}
{%- extends 'portal/overall.html' %}
{% from 'macros.html' import render_form %}

{% do BREADCRUMB.append('Konfiguration', href('portal', 'config'), True) %}
{% set scripts = ['portal'] %}

{% block content %}
<form enctype="multipart/form-data" action="" method="post" id="configuration">
  <h3>Allgemeine Einstellungen</h3>
  <dl>
    {{ render_form(form, ['global_message', 'blocked_hosts', 'wiki_newpage_template', 'wiki_newpage_root', 'wiki_newpage_infopage', 'license_note'], inline=true) }}
    {% if team_icon_url %}<dd><img class="admin_teamicon" src="{{ team_icon_url }}" alt="Team Icon" /></dd>{% endif %}
    <dt>{{ form.team_icon.label }}</dt>
    <dd>{{ form.team_icon }} {{ form.errors.team_icon }}</dd>
  </dl>
  <h3>Verschiedene Richtgrößen</h3>
  <dl>
    {{ render_form(form, ['max_signature_length', 'max_signature_lines'], inline=true) }}
    <dt>Maximale Avatargröße</dt>
    <dd>{{ form.max_avatar_width }} × {{ form.max_avatar_height }} Pixel und
        {{ form.max_avatar_size }} KiB (0 für unbegrenzt)
        {{ form.errors.max_avatar_height }} {{ form.errors.max_avatar_width }}
        {{ form.errors.max_avatar_size }}</dd>
    <dt>Maximale Team-Icon Größe</dt>
    <dd>{{ form.team_icon_height }} x {{ form.team_icon_width }} Pixel
        {{ form.errors.team_icon_height }} {{ form.errors.team_icon_width }}</dd>
  </dl>
  <h3>Get-Ubuntu-Link</h3>
  {{ render_form(form, ['get_ubuntu_link', 'get_ubuntu_description']) }}
  <br />
  <h3>Distributions Versionen</h3>
<table id="distri-table" class="jstableform">
  <thead>
    <tr>
      <td class="jstableform-_jswarning" colspan="8">
        Um diese Funktion nutzen zu können muss JavaScript aktiviert sein!
      </td>
    </tr>
    <tr>
      <td class="jstableform-key-number jstableform-type-string jstableform-validate-versionnumber">Version</td>
      <td class="jstableform-key-name jstableform-type-string jstableform-validate-versionname">Name</td>
      <td class="jstableform-key-lts jstableform-type-boolean">LTS</td>
      <td class="jstableform-key-active jstableform-type-boolean">Aktiv</td>
      <td class="jstableform-key-current jstableform-type-boolean">Aktuell</td>
      <td class="jstableform-key-dev jstableform-type-boolean">Entwicklung</td>
      <td class="jstableform-key-_cmdedit"></td>
      <td class="jstableform-key-_cmddel"></td>
    </tr>
  </thead>
  <tfoot><tr>
    <td colspan="8"><a href="#distri-table" name="jstableform-add">Hinzufügen</a></td>
  </tr></tfoot>
  <tbody>
    {%- for version in versions -%}
    <tr name="jstableform-{{ version.number|e }}">
      <td name="jstableform-key-number">{{ version.number|e }}</td>
      <td name="jstableform-key-name">{{ version.name|e }}</td>
      <td name="jstableform-key-lts" class="jstableform-status-{% if version.lts == 'true' %}yes{% else %}no{% endif %}"></td>
      <td name="jstableform-key-active" class="jstableform-status-{% if version.active == 'true' %}yes{% else %}no{% endif %}"></td>
      <td name="jstableform-key-current" class="jstableform-status-{% if version.current == 'true' %}yes{% else %}no{% endif %}"></td>
      <td name="jstableform-key-dev" class="jstableform-status-{% if version.dev == 'true' %}yes{% else %}no{% endif %}"></td>
      <td name="jstableform-key-_cmdedit"><a href="#distri-table">Ändern</a></td>
      <td name="jstableform-key-_cmddel"><a href="#distri-table">Löschen</a></td>
    </tr>
    {%- endfor -%}
  </tbody>
</table>
{{ form.distri_versions }}
  <p>
    <input type="submit" value="Speichern" />
  </p>
</form>
{% endblock %}

{% block additional_scripts %}
<script type="text/javascript">
  $(function() {
    JSTableForm($('#distri-table'), $('#id_distri_versions'));
  });
</script>
{% endblock %}
