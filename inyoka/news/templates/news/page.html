{#
    news/page.html
    ~~~~~~~~~~~~~~~~

    they all use (stylesheets etc).

    :copyright: (c) 2007-2012 by the Inyoka Team, see AUTHORS for more details.
    :license: GNU GPL, see LICENSE for more details.
#}
{%- extends 'overall.html' %}
{% do BREADCRUMB.append(_('News'), href('news'), True) %}
{% set styles = styles|default([]) + ['news', 'highlight'] %}
{% set scripts = scripts|default([]) + ['news'] %}
{% set active_app = 'news' %}
{% set navi_type  = 'sidebar' %}

{%- block html_head %}
  {{ super() }}
  <script type="text/javascript">
    /*<![CDATA[*/
      var $SIDEBAR_HIDDEN = {{ USER.settings.news_sidebar_hidden and 'true' or 'false' }};
    /*]]>*/
  </script>
{%- endblock %}

{% block sidebar %}
  <div class="container">
    <h3 class="navi_about_news">Ãœber News</h3>
    <p>{{ news_description }}</p>
    <h3 class="navi_new_article admin_link_hover">Vorschlagen</h3>
    <ul>
      <li><a href="{{ href('news', 'suggest', 'new') }}">{% trans %}Suggest article{% endtrans %}</a></li>
      <li><a href="{{ href('news', 'event', 'suggest') }}">{% trans %}Suggest event{% endtrans %}</a></li>
      {%- if USER.can('article_edit') -%}
        <li class="admin_link"><a href="{{ href('news', 'article', 'new') }}">{% trans %}New article{% endtrans %}</a></li>
      {%- endif -%}
      {%- if USER.can('event_edit') -%}
        <li class="admin_link"><a href="{{ href('news', 'event', 'new') }}">{% trans %}Add event{% endtrans %}</a></li>
      {%- endif -%}
    </ul>
    <h3 class="navi_archive">{% trans %}Archive{% endtrans %}</h3>
    <ul>
      <li><a href="{{ href('news') }}">{% trans %}Current articles{% endtrans %}</a></li>
      {%- for date in archive -%}
        <li>
          <a href="{{ href('news', date.strftime('%Y/%m')) }}">{{-
            MONTHS[date.month] }} {{ date.strftime('%Y') }}</a>
        </li>
      {%- endfor %}
      {%- if short_archive %}
        <li>
          <a href="{{ href('news', 'archive') }}">{% trans %}Entire archive{% endtrans %}</a>
        </li>
      {% endif -%}
    </ul>
    {% if categories or USER.can('category_edit') %}
      <h3 class="navi_categories admin_link_hover{% if not categories %} admin_link{% endif %}">{% trans %}Categories{% endtrans %}</h3>
      <ul>
        {%- if USER.can('category_edit') -%}
          <li class="admin_link"><a href="{{ href('news', 'category', 'new') }}">{% trans %}Add category{% endtrans %}</a></li>
        {%- endif -%}
        {%- for category in categories -%}
          <li class="admin_link_hover">
            {%- if USER.can('category_edit') -%}
              <a class="admin_link" href="{{ href('news', 'category', category.slug, 'edit') }}"><img src="{{ href('static', 'img/news/category_edit.png') }}" /></a>
            {%- endif -%}
            <a href="{{ category|url }}">{{ category.name|e }}</a>
          </li>
        {%- endfor %}
      </ul>
    {% endif %}
    {% if show_full_choice %}
      <h3 class="navi_full_articles">{% trans %}Display options{% endtrans %}</h3>
      <ul>
        {% if '/full/' in CURRENT_URL %}
          <li><a href="{{ CURRENT_URL[:-6] }}">{% trans %}Show only teaser{% endtrans %}</a></li>
        {% else %}
          <li><a href="{{ [CURRENT_URL[:-1], 'full', '']|join('/') }}">{% trans %}Show full article{% endtrans %}</a></li>
        {% endif %}
      </ul>
    {% endif %}
    {%- if USER.can('static_page_edit') or USER.can('static_file_edit') or USER.can('configuration_edit') or USER.can('markup_css_edit') %}
      <h3 class="navi_config">{% trans %}Configuration{% endtrans %}</h3>
      <ul>
        {%- if USER.can('configuration_edit') %}
          <li><a href="{{ href('portal', 'config') }}">{% trans %}General{% endtrans %}</a></li>
        {%- endif %}
        {%- if USER.can('markup_css_edit') %}
          <li><a href="{{ href('portal', 'styles') }}">{% trans %}Stylesheets{% endtrans %}</a></li>
        {%- endif %}
        {%- if USER.can('static_page_edit') %}
          <li><a href="{{ href('portal', 'pages') }}">{% trans %}Static pages{% endtrans %}</a></li>
        {% endif %}
        {%- if USER.can('static_file_edit') %}
          <li><a href="{{ href('portal', 'files') }}">{% trans %}Static files{% endtrans %}</a></li>
        {% endif %}
      </ul>
    {%- endif %}

  </div>
{% endblock %}

{% block content %}
  {%- block news_content %}
  {%- endblock %}
{%- endblock %}
