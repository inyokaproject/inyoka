{#
    ikhaya/page.html
    ~~~~~~~~~~~~~~~~

    they all use (stylesheets etc).

    :copyright: (c) 2007-2011 by the Inyoka Team, see AUTHORS for more details.
    :license: GNU GPL, see LICENSE for more details.
#}
{%- extends 'overall.html' %}
{% do BREADCRUMB.append('Ikhaya', href('ikhaya'), True) %}
{% set styles = styles|default([]) + ['ikhaya', 'highlight'] %}
{% set scripts = scripts|default([]) + ['ikhaya'] %}
{% set active_app = 'ikhaya' %}
{% set navi_type  = 'sidebar' %}

{%- block html_head %}
  {{ super() }}
  <script type="text/javascript">
    /*<![CDATA[*/
      var $SIDEBAR_HIDDEN = {{ USER.settings.ikhaya_sidebar_hidden and 'true' or 'false' }};
    /*]]>*/
  </script>
{%- endblock %}

{% block sidebar %}
  <div class="container">
    <h3 class="navi_about_ikhaya">Über Ikhaya</h3>
    <p>
      Ikhaya ist der Nachrichtenblog der ubuntuusers-Community. Hier werden Nachrichten und
      Berichte rund um Ubuntu, Linux und Open Source-Software veröffentlicht.
    </p>
    <h3 class="navi_new_article admin_link_hover">Vorschlagen</h3>
    <ul>
      <li><a href="{{ href('ikhaya', 'suggest', 'new') }}">Artikel vorschlagen</a></li>
      <li><a href="{{ href('ikhaya', 'event', 'suggest') }}">Veranstaltung vorschlagen</a></li>
      {%- if USER.can('article_edit') -%}
        <li class="admin_link"><a href="{{ href('ikhaya', 'article', 'new') }}">Artikel schreiben</a></li>
      {%- endif -%}
      {%- if USER.can('event_edit') -%}
        <li class="admin_link"><a href="{{ href('ikhaya', 'event', 'new') }}">Veranstaltung eintragen</a></li>
      {%- endif -%}
    </ul>
    <h3 class="navi_archive">Archiv</h3>
    <ul>
      <li><a href="{{ href('ikhaya') }}">Aktuelle Artikel</a></li>
      {%- for date in archive -%}
        <li><a href="{{ href('ikhaya', date.strftime('%Y/%m')) }}">{{-
            MONTHS[date.month] }} {{ date.strftime('%Y') }}</a></li>
      {%- endfor %}
      {%- if short_archive %}
      <li><a href="{{ href('ikhaya', 'archive') }}">Komplettes Archiv</a></li>
      {% endif -%}
    </ul>
    {% if categories or USER.can('category_edit') %}
    <h3 class="navi_categories admin_link_hover{% if not categories %} admin_link{% endif %}">Kategorien</h3>
    <ul>
      {%- if USER.can('category_edit') -%}
        <li class="admin_link"><a href="{{ href('ikhaya', 'category', 'new') }}">Kategorie anlegen</a></li>
      {%- endif -%}
      {%- for category in categories -%}
        <li class="admin_link_hover">
          {%- if USER.can('category_edit') -%}
            <a class="admin_link" href="{{ href('ikhaya', 'category', category.slug, 'edit') }}"><img src="{{ href('static', 'img/ikhaya/category_edit.png') }}" /></a>
          {%- endif -%}
          <a href="{{ category|url }}">{{ category.name|e }}</a>
        </li>
      {%- endfor %}
    </ul>
    {% endif %}
    {% if show_full_choice %}
    <h3 class="navi_full_articles">Anzeigeoptionen</h3>
    <ul>
      {% if '/full/' in CURRENT_URL %}
      <li><a href="{{ CURRENT_URL[:-6] }}">nur Einleitung anzeigen</a></li>
      {% else %}
      <li><a href="{{ [CURRENT_URL[:-1], 'full', '']|join('/') }}">Vollständige Artikel anzeigen</a></li>
      {% endif %}
    </ul>
    {% endif %}
    {%- if USER.can('static_page_edit') or USER.can('static_file_edit') or USER.can('configuration_edit') or USER.can('markup_css_edit') %}
    <h3 class="navi_config">Konfiguration</h3>
    <ul>
    {%- if USER.can('configuration_edit') %}
      <li><a href="{{ href('portal', 'config') }}">Allgemein</a></li>
    {%- endif %}
    {%- if USER.can('markup_css_edit') %}
      <li><a href="{{ href('portal', 'styles') }}">Markup-Stylesheets</a></li>
    {%- endif %}
    {%- if USER.can('static_page_edit') %}
      <li><a href="{{ href('portal', 'pages') }}">Statische Seiten</a></li>
    {% endif %}
    {%- if USER.can('static_file_edit') %}
      <li><a href="{{ href('portal', 'files') }}">Statische Dateien</a></li>
    {% endif %}
    </ul>
    {%- endif %}

  </div>
{% endblock %}

{% block content %}
  {%- block ikhaya_content %}
  {%- endblock %}
{%- endblock %}
